<!DOCTYPE html>
<html>
    <head>
        <title>PMDynaform</title>
        <meta charset="utf-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no">
        <link rel="stylesheet" href="/lib/pmdynaform/libs/bootstrap-3.1.1/css/bootstrap.min.css">
        <link rel="stylesheet" href="/lib/pmdynaform/build/css/PMDynaform.css">
        <script type="text/javascript" src="/lib/pmdynaform/libs/jquery/jquery-1.11.js"></script>
        <script type="text/javascript" src="/lib/pmdynaform/libs/bootstrap-3.1.1/js/bootstrap.min.js"></script>
        <script type="text/javascript" src="/lib/pmdynaform/libs/underscore/underscore-1.6.js"></script>
        <script type="text/javascript" src="/lib/pmdynaform/libs/backbone/backbone-min.js"></script>
        <script type="text/javascript" src="/lib/pmdynaform/libs/restclient/restclient.js"></script>
    </head>
    <body>
        <div id="container"></div>
        ###TEMPLATES###
        <script type="text/javascript" src="/lib/pmdynaform/build/js/PMDynaform.js"></script>
        <script type="text/javascript">
            var jsondata = {JSON_DATA};
            var pm_run_outside_main_app = '{PM_RUN_OUTSIDE_MAIN_APP}';
            var dyn_uid = '{DYN_UID}';
            var __DynaformName__ = '{DYNAFORMNAME}';
            var app_uid = '{APP_UID}';
            var prj_uid = '{PRJ_UID}';
            var workspace = '{WORKSPACE}';
            var credentials = {credentials};
            $(window).load(function () {
                var data = jsondata;
                window.project = new PMDynaform.core.Project({
                    data: data,
                    keys: {
                        server: location.host,
                        projectId: prj_uid,
                        workspace: workspace
                    },
                    token: credentials,
                    submitRest: false
                });
                new PMDynaform.core.Proxy({
                    url: "http://" + window.project.keys.server + "/" + window.project.keys.apiName + "/" + window.project.keys.apiVersion + "/" + window.project.keys.workspace + "/cases/" + app_uid + "/variables",
                    method: 'GET',
                    data: {},
                    keys: window.project.token,
                    successCallback: function (xhr, response) {
                        window.project.setData2(response);
                    }
                });
                $(document).find('form').submit(function (e) {
                    e.preventDefault();
                    return false;
                });
            });
        </script>
    </body>
</html>
